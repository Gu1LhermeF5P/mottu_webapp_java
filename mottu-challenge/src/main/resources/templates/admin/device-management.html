<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragments/header :: head('Gerenciar Dispositivos')}"></head>

<body data-theme="emerald">

    <div th:replace="~{fragments/header :: navbar}"></div>

    <main class="container mx-auto p-4 lg:p-8">
        <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4">
            <h1 class="text-3xl font-bold">Gerenciamento de Dispositivos</h1>
            <form th:action="@{/admin/devices/add}" method="post">
                <button type="submit" class="btn btn-primary">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd" /></svg>
                    Adicionar Novo Dispositivo ID
                </button>
            </form>
        </div>

        <div th:if="${successMessage}" role="alert" class="alert alert-success mb-4" th:text="${successMessage}"></div>

        <div class="overflow-x-auto shadow-lg rounded-lg">
            <table class="table table-zebra w-full">
                <thead>
                    <tr>
                        <th>ID do Dispositivo</th>
                        <th>UUID</th>
                        <th>Status</th>
                        <th>Vinculado à Moto (Placa)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="device : ${devices}" class="hover">
                        <td th:text="${device.id}"></td>
                        <td class="font-mono text-xs" th:text="${device.uuid}"></td>
                        <td>
                            <span th:if="${device.motorcycle == null}" class="badge badge-success">Disponível no Estoque</span>
                            <span th:unless="${device.motorcycle == null}" class="badge badge-warning">Em Uso</span>
                        </td>
                        <td th:text="${device.motorcycle != null ? device.motorcycle.licensePlate : 'N/A'}"></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </main>

</body>
</html>